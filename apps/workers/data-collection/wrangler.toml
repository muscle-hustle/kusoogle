name = "kusoogle-data-collection"
main = "src/index.ts"
compatibility_date = "2024-01-01"

# Vectorizeバインディング
# v2: 要約アプローチ評価用の新しいインデックス
# 既存の kusoogle-articles は比較用に残す
[[vectorize]]
binding = "VECTORIZE_INDEX"
index_name = "kusoogle-articles-v2"

# AI Workersバインディング
[ai]
binding = "AI"

# Cron Triggerの設定（JST 3:00 = UTC 18:00）
#[triggers]
#crons = ["0 18 * * *"]

[observability]
[observability.logs]
enabled = true
head_sampling_rate = 1
invocation_logs = true
persist = true

[observability.traces]
enabled = true
head_sampling_rate = 1
persist = true

# 環境変数
[vars]
ENVIRONMENT = "development"

# シークレット（wrangler secret put コマンドで設定）
# QIITA_ACCESS_TOKEN: Qiita APIアクセストークン（認証時はレート制限が緩和される）
# 設定方法: wrangler secret put QIITA_ACCESS_TOKEN
# INITIALIZE_SECRET: 初期データ取得エンドポイント用のシークレットトークン
# 設定方法: wrangler secret put INITIALIZE_SECRET
# 注意: 設定しない場合は認証なしでアクセス可能（開発環境のみ推奨）

