# クソアプリ検索エンジン「kusoogle」画面仕様書

## 1. 概要

### 1.1 目的
本ドキュメントは、kusoogleのユーザーインターフェース（UI）とユーザーエクスペリエンス（UX）の詳細仕様を定義する。

### 1.2 デザインコンセプト
- **シンプル**: 余計な装飾を排除し、検索に集中できるクリーンなUI
- **ポップ**: 明るく親しみやすい色使いと、軽やかな印象
- **ゆるい**: 堅苦しさのない、カジュアルで親しみやすい雰囲気
- **UX重視**: 見た目はゆるくても、使いやすさと情報の明確さには徹底的に拘る
- **レスポンシブデザイン**: モバイル・タブレット・デスクトップに対応

## 2. ページ構成

### 2.1 全体構成
```
┌─────────────────────────────────────┐
│           Header (固定)             │
│  - ロゴ/タイトル                    │
│  - サブタイトル（オプション）        │
└─────────────────────────────────────┘
┌─────────────────────────────────────┐
│         Search Form (検索フォーム)   │
│  - 検索入力フィールド                │
│  - 検索ボタン                        │
└─────────────────────────────────────┘
┌─────────────────────────────────────┐
│   Explanation Card (Phase 2)         │
│  - 類似度の説明                      │
└─────────────────────────────────────┘
┌─────────────────────────────────────┐
│      Search Results (検索結果)      │
│  - 結果件数表示（オプション）        │
│  - 記事カード一覧                    │
└─────────────────────────────────────┘
```

### 2.2 ページ一覧
- **トップページ** (`/`): 検索フォームと検索結果を表示する唯一のページ

## 3. トップページ詳細仕様

### 3.1 レイアウト構造

#### 3.1.1 Header（ヘッダー）
**位置**: ページ最上部

**要素**:
- **ロゴ/タイトル**: 「kusoogle」または「クソーグル」
- **サブタイトル**（オプション）: 「クソアプリ検索エンジン」

**スタイル**:
- 中央揃え
- 適切な余白（上下パディング）
- フォントサイズ: タイトルは大きく、サブタイトルは小さく

#### 3.1.2 Search Form（検索フォーム）
**位置**: ヘッダーの下、中央配置

**要素**:
- **検索入力フィールド**: テキスト入力
- **検索ボタン**: 送信ボタン

**機能**:
- 入力検証: 1文字以上500文字以下
- 特殊文字のサニタイズ
- フォーム送信で検索実行
- エンターキーで検索実行

**スタイル**:
- 最大幅を設定（例: max-w-2xl）
- 中央揃え
- 適切な余白
- 入力フィールドとボタンを横並び（モバイルでは縦並び）

**状態**:
- **通常**: 入力可能
- **検索中**: ボタンを無効化、ローディング表示

#### 3.1.3 Search Results（検索結果エリア）
**位置**: 検索フォームの下

**要素**:
- **結果件数表示**（オプション）: 「○件の結果が見つかりました」
- **記事カード一覧**: ArticleCardコンポーネントのリスト

**表示条件**:
- 検索実行後、結果がある場合のみ表示
- 検索結果がない場合: 「検索結果が見つかりませんでした」を表示

**スタイル**:
- 最大幅を設定（例: max-w-4xl）
- 中央揃え
- カード間の適切な余白
- グリッドレイアウト（モバイル: 1列、タブレット: 2列、デスクトップ: 2-3列）

**ローディング状態**:
- スケルトンUIを表示
- カードのプレースホルダーを3-5個表示

#### 3.1.4 Explanation Card（説明カード、Phase 2）
**位置**: 検索結果の下

**要素**:
- **タイトル**: 「なぜこれらの記事が似ているか」
- **説明文**: LLMで生成された説明テキスト

**表示タイミング**:
- 検索結果表示後に非同期で取得
- ローディング中はスケルトンUIを表示

**スタイル**:
- 最大幅を設定（例: max-w-4xl）
- 中央揃え
- カード形式で表示
- 適切な余白とパディング

## 4. コンポーネント詳細仕様

### 4.1 ArticleCard（記事カード）

#### 4.1.1 表示項目
1. **著者名**: 投稿者のIDまたは名前
2. **記事タイトル**: クリック可能なリンク
3. **URL**: 「Qiitaで読む」リンク
4. **投稿日時**: フォーマット済みの日付
5. **タグ**: タグのバッジ形式表示
6. **いいね数**: いいねアイコンと数値
7. **類似度スコア**: パーセンテージ表示（オプション）
8. **出典表示**: 「出典: Qiita」

#### 4.1.2 レイアウト
```
┌─────────────────────────────────┐
│ 著者名                   出典: Qiita │
│ ─────────────────────────────── │
│ 記事タイトル（リンク）            │
│                                 │
│ [タグ1] [タグ2] [タグ3]         │
│                                 │
│ 投稿日時  ❤️ いいね数             │
│ 類似度: 85%                     │
│                                 │
│ [Qiitaで読む] ボタン            │
└─────────────────────────────────┘
```

#### 4.1.3 スタイル
- **カード**: 白背景、控えめな影、大きな角丸（rounded-xl）
- **ホバー効果**: カードが浮き上がる（影が濃くなる、transform: translateY(-2px)）
- **リンク**: 明るい青色、ホバーで下線、滑らかなトランジション
- **タグ**: 小さなバッジ、ポップな背景色（オレンジ、グリーンなど）、角丸
- **いいね数**: 赤色のハートアイコン、温かみのある色
- **全体的に**: ゆったりとした余白、読みやすいフォントサイズ

### 4.2 SearchForm（検索フォーム）

#### 4.2.1 機能
- テキスト入力
- バリデーション（1文字以上500文字以下）
- エンターキーで送信
- 検索中の無効化

#### 4.2.2 スタイル
- 入力フィールド: 大きな角丸、適切なパディング、フォーカス時の視覚的フィードバック
- 検索ボタン: 明るい青色、ホバー時の色変化、クリック時のスケール効果
- エラーメッセージ: 赤色で表示、フォームの下に配置

### 4.3 SearchResults（検索結果）

#### 4.3.1 機能
- 検索結果の一覧表示
- ローディング状態の表示
- 結果がない場合のメッセージ表示

#### 4.3.2 表示内容
- **ローディング中**: スケルトンカードを5個表示
- **結果あり**: 結果件数と記事カード一覧を表示
- **結果なし**: 「検索結果が見つかりませんでした」メッセージを表示

### 4.4 SkeletonCard（スケルトンカード）

#### 4.4.1 目的
ローディング状態を視覚的に表示する

#### 4.4.2 スタイル
- 記事カードと同じレイアウト構造
- グレーのプレースホルダーで各要素を表現
- アニメーション効果でローディング中であることを示す

### 4.5 ExplanationCard（説明カード、Phase 2）

#### 4.5.1 表示項目
- **タイトル**: 「なぜこれらの記事が似ているか」
- **説明文**: LLMで生成されたテキスト

#### 4.5.2 スタイル
- カード形式で表示
- 左側にアクセントカラーのボーダー
- ローディング中はスケルトンUIを表示

## 5. レスポンシブデザイン

### 5.1 ブレークポイント
- **モバイル**: 640px未満
- **タブレット**: 640px以上768px未満
- **デスクトップ（小）**: 768px以上1024px未満
- **デスクトップ（大）**: 1024px以上

### 5.2 レイアウト調整

#### 5.2.1 検索フォーム
- **モバイル**: 縦並び（入力フィールドとボタン）
- **タブレット以上**: 横並び

#### 5.2.2 検索結果
- **モバイル**: 1列
- **タブレット**: 2列
- **デスクトップ**: 2-3列

#### 5.2.3 パディング・マージン
- **モバイル**: 小さいパディング（px-4）
- **タブレット以上**: 大きいパディング（px-6）

## 6. 状態管理

### 6.1 状態一覧

#### 6.1.1 検索状態
- **query**: 検索クエリ（文字列）
- **isLoading**: 検索中フラグ（boolean）
- **results**: 検索結果（SearchResult[]）
- **error**: エラーメッセージ（string | null）

#### 6.1.2 説明状態（Phase 2）
- **explanation**: 説明文（string | null）
- **isLoadingExplanation**: 説明生成中フラグ（boolean）

### 6.2 状態遷移

```
初期状態
  ↓
[検索フォーム入力]
  ↓
[検索実行]
  ↓
isLoading: true
  ↓
[検索完了]
  ↓
isLoading: false
results: [...]
  ↓
[Phase 2: 説明生成開始]
  ↓
isLoadingExplanation: true
  ↓
[説明生成完了]
  ↓
isLoadingExplanation: false
explanation: "..."
```

## 7. エラーハンドリング

### 7.1 エラー表示

#### 7.1.1 バリデーションエラー
- **場所**: 検索フォームの下
- **スタイル**: 赤色のテキスト
- **内容**: 具体的なエラーメッセージ

#### 7.1.2 APIエラー
- **場所**: 検索結果エリア
- **スタイル**: エラーカード（赤枠、警告アイコン）
- **内容**: 「検索中にエラーが発生しました。しばらくしてから再度お試しください。」

### 7.2 エラー表示スタイル
- 背景色: 柔らかい赤（#fef2f2）
- ボーダー: 赤色の太いボーダー
- 角丸: 大きな角丸
- アイコン: 警告アイコン（⚠️）を表示
- テキスト: 赤色の太字

## 8. アクセシビリティ

### 8.1 対応事項
- **キーボード操作**: すべての機能をキーボードで操作可能
- **フォーカス表示**: フォーカス時の視覚的フィードバック
- **ARIA属性**: 適切なaria-label、aria-describedbyを設定
- **セマンティックHTML**: 適切なHTMLタグを使用（header, main, articleなど）

### 8.2 対応例
- ボタンに適切なaria-labelを設定
- 入力フィールドにaria-describedbyで説明を関連付け
- スクリーンリーダー用の非表示テキストを提供
- セマンティックなHTMLタグを使用

## 9. パフォーマンス最適化

### 9.1 最適化方針
- サーバーサイドでのレンダリングを活用
- 必要なコンポーネントのみを読み込む
- 画像は最適化された形式で表示（将来、画像を表示する場合）
- フォントは最適化された形式で読み込む

### 9.2 ローディング戦略
- **スケルトンUI**: ローディング状態を視覚的に表示
- **段階的表示**: 検索結果を即座に表示、説明は非同期で取得（Phase 2）

## 10. デザインシステム

### 10.1 デザイン方針
- **シンプル**: 余計な装飾を排除し、情報に集中できるクリーンなデザイン
- **ポップ**: 明るく親しみやすい色使いで、楽しい印象を与える
- **ゆるい**: 堅苦しさのない、カジュアルで親しみやすい雰囲気
- **UX重視**: 見た目はゆるくても、使いやすさ、情報の明確さ、アクセシビリティには徹底的に拘る

### 10.2 カラーパレット
- **プライマリ**: 明るい青（#3b82f6 または #60a5fa）- リンク、ボタン、アクセント
- **セカンダリ**: 温かみのあるグレー（#6b7280）- テキスト、ボーダー
- **アクセント**: ポップな色（#f59e0b オレンジ、#10b981 グリーンなど）- タグ、装飾
- **背景**: 白（#ffffff）- カード背景
- **背景（ページ）**: 柔らかいグレー（#f9fafb または #f3f4f6）- ページ背景
- **エラー**: 柔らかい赤（#ef4444）- エラーメッセージ
- **成功**: 明るい緑（#10b981）- 成功メッセージ（将来使用）

### 10.3 タイポグラフィ
- **フォントファミリー**: システムフォント（-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif）
- **見出し**: 太字、大きめのサイズ、でも堅苦しくない
- **本文**: 通常の太さ、読みやすいサイズ、適度な行間
- **装飾**: 必要に応じて絵文字やアイコンを活用（ただしUXを損なわない範囲で）

### 10.4 スペーシング
- **統一された間隔**: 一貫性のある間隔を使用
- **カード間**: 適度な余白（16px-24px程度）で見やすく
- **セクション間**: ゆったりとした間隔（32px-48px程度）
- **パディング**: カード内は余裕のあるパディング（24px程度）

### 10.5 角丸・影
- **角丸**: 大きな角丸（12px-16px程度）で柔らかい印象
- **影**: 控えめな影で立体感を出す
- **ホバー**: ホバー時に影を濃くして浮き上がる印象を与える

### 10.6 アニメーション
- **トランジション**: 滑らかなトランジション（200ms程度）
- **ホバー効果**: 控えめで自然な動き
- **ローディング**: スケルトンUIで視覚的フィードバック

## 11. 参考資料

- [Web Content Accessibility Guidelines (WCAG)](https://www.w3.org/WAI/WCAG21/quickref/)

