# クソアプリ検索エンジン「kusoogle」要件定義書

## 1. プロジェクト概要

### 1.1 プロジェクト名
kusoogle（クソーグル）

### 1.2 プロジェクトの目的
クソアプリアドベントカレンダーに参加する前に、自分のアイデアと類似したクソアプリが過去に存在しないか確認するための検索エンジンを提供する。

### 1.3 コンセプト
**「用途はクソだが、中身は無駄に高度」**

- ユーザーにとっては単純な検索ツール
- 技術的には意味的類似性を理解する高度なベクトル検索を実装
- 将来的には類似アプリの説明機能も追加予定

## 2. 機能要件

### 2.1 必須機能（MVP）

#### 2.1.1 記事データ収集機能
- **FR-001**: Qiita API v2を使用して、クソアプリアドベントカレンダーの記事を取得できる
- **FR-002**: 取得した記事の著者、タイトル、本文、URL、投稿日時、タグ、いいね数を抽出できる
- **FR-003**: 記事のタイトル、タグ、本文をEmbedding化してベクトルデータとして保存できる（記事本文自体は保存せず、ベクトルのみ保存）
- **FR-004**: 対象カレンダーのURLを設定ファイルで指定できる
- **FR-005**: 過去年分のカレンダーは初期リリース時に一度だけ取得し、再取得しない
- **FR-006**: 最新年分のカレンダーは日次で最新記事を取得できる（Cron Trigger）

#### 2.1.2 検索機能
- **FR-007**: ユーザーが入力したクエリをEmbedding化できる
- **FR-008**: ベクトル類似度検索により、類似記事を取得できる
- **FR-009**: 検索結果を類似度の高い順に表示できる
- **FR-010**: 検索結果には著者、記事タイトル、URL、投稿日時、タグ、いいね数を表示する（記事本文は表示しない）

#### 2.1.3 ユーザーインターフェース
- **FR-011**: 検索フォームを提供する
- **FR-012**: 検索結果を一覧表示する
- **FR-013**: 検索結果から記事へのリンクをクリックできる

### 2.2 拡張機能（Phase 2）

#### 2.2.1 類似アプリ説明機能
- **FR-014**: 検索結果と併せて、なぜ類似しているかの説明を表示できる
- **FR-015**: 説明はLLM（Cloudflare AI Workers）を使用して生成する
- **FR-016**: 検索結果は即座に表示し、説明は非同期で取得して段階的に表示する

## 3. 非機能要件

### 3.1 パフォーマンス
- **NFR-001**: 検索結果の表示は3秒以内に完了する（UXに関わる全体の時間、説明機能は除く）
- **NFR-002**: 説明機能の生成は10秒以内に完了する

### 3.2 可用性
- **NFR-003**: サービスは24時間365日利用可能であること（CloudflareのSLAに準拠）

### 3.3 コスト
- **NFR-004**: 無料枠または低コストで運用できること
- **NFR-005**: 月額コストは可能な限り0円を目指す

### 3.4 セキュリティ
- **NFR-006**: Qiita APIの利用規約を遵守する
- **NFR-007**: レート制限を遵守する

### 3.5 保守性
- **NFR-008**: TypeScriptで統一されたコードベースを維持する
- **NFR-009**: ドキュメントを整備し、将来の機能追加に対応できる設計とする

## 4. 制約事項

### 4.1 技術的制約
- **CON-001**: Qiita API v2の利用規約の範囲内で実装する
- **CON-002**: Qiita APIのレート制限（1時間あたりのリクエスト数）を遵守する
- **CON-003**: 取得した記事データは適切にキャッシュし、API呼び出しを最小化する

### 4.2 ビジネス制約
- **CON-004**: ネタアプリのため、コストを最小限に抑える
- **CON-005**: 個人開発プロジェクトのため、運用負荷を最小化する
- **CON-010**: 非商用プロジェクトとして運営し、広告や収益化は行わない

### 4.3 法的制約
- **CON-006**: Qiitaの利用規約に違反しない
- **CON-007**: 取得した記事データの利用は、Qiitaの利用規約の範囲内とする
- **CON-008**: 記事本文はEmbedding生成にのみ使用し、保存・表示はしない（著作権保護のため）
- **CON-009**: 非商用プロジェクトとして運営する

## 5. 対象ユーザー

### 5.1 プライマリユーザー
- クソアプリアドベントカレンダーに参加予定の開発者
- クソアプリのアイデアを考えている開発者

### 5.2 セカンダリユーザー
- 過去のクソアプリを探索したい開発者
- クソアプリのネタを探している開発者

## 6. 成功基準

### 6.1 機能面
- クソアプリアドベントカレンダーの記事を正確に検索できる
- 意味的に類似した記事を適切に検出できる

### 6.2 ユーザー体験
- 直感的なUIで検索できる
- 検索結果が分かりやすく表示される

### 6.3 技術面
- 無料枠内で運用できる
- メンテナンスが容易なコードベースを維持する

## 7. 今後の拡張予定

### 7.1 Phase 3（将来検討）
- よくあるクエリの説明をキャッシュする機能
- 検索履歴の保存機能
- お気に入り機能

### 7.2 その他
- 検索結果のフィルタリング機能（タグ、投稿年など）
- 検索結果のソート機能（投稿日順、類似度順など）

